<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="./toastify.min.css" />
    <style>
      @keyframes custom-fadeUp {
        0% {
          opacity: 0;
          transform: translateY(50px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .custom-fadeUp {
        animation: custom-fadeUp 1s ease-out;
      }
    </style>
  </head>
  <body>
    <div role="main" class="main min-vh-100" style="padding-top: 50px">
      <div class="container">
        <div class="row mb-2 gx-4 justify-content-center">
          <div class="col-12 col-md-11 col-lg-10">
            <img src="./logo.png" style="filter: invert(1)" class="d-block mx-auto mb-3" width="100" height="100" alt="">
            <h2
              class="text-color-dark text-center fw-bold fs-1 mb-2 pt-0 mt-0"
            >
              Hitung Tarif Pengelolaan Sampah Anda
            </h2>
            <div class="text-4 mt-5">
              <div class="row justify-content-center g-4">
                <div
                  class="col-md-6 col-12 custom-fadeUp"
                  data-appear-animation="fadeInUpShorter"
                  data-appear-animation-delay="400"
                >
                  <div
                    class="card shadow col-12 position-sticky"
                    style="top: 100px"
                  >
                    <div class="card-body">
                      <h3
                        class="card-title text-center text-capitalize fw-semibold"
                      >
                        Simulasi Tarif Layanan <span></span>
                      </h3>
                      <p
                        class="card-text text-center"
                        style="font-size: 0.9rem"
                      >
                        Masukan data dibawah ini untuk melihat simulasi tarif
                        yang akan dikenakan untuk anda
                      </p>
                      <form id="form-simulasi" style="font-size: 0.85rem">
                        <div class="mb-3" style="display">
                          <label for="nama" class="form-label fw-semibold"
                            >Nama Perusahaan/Kawasan</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            name="nama"
                            id="nama"
                            autocomplete="off"
                          placeholder="Masukan Nama Perusahaan/Kawasan"
                            required
                          />
                        </div>
                        <div class="mb-3" style="display">
                          <label for="email" class="form-label fw-semibold"
                            >Email</label
                          >
                          <input
                            type="email"
                            class="form-control"
                            name="email"
                            id="email"
                            placeholder="mail@gmail.com"
                            autocomplete="off"
                            required
                          />
                        </div>
                        <div class="mb-3" style="display">
                          <label for="alamat" class="form-label fw-semibold"
                            >Alamat Lengkap</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            name="alamat"
                            id="alamat"
                            placeholder="contoh: Jl. Cekatan No.1 RT.02 RW.11, Kelp. Gading Barat, Kelapa Gading, Jakarta Utara"
                            autocomplete="off"
                            required
                          />
                        </div>
                        <div class="mb-3">
                          <label for="kawasan" class="form-label fw-semibold">
                            Jenis Kawasan
                          </label>
                          <select
                            class="form-select text-capitalize"
                            id="kawasan"
                            name="kawasan"
                            required
                          >
                            <option value="null" disabled>
                              Pilih jenis kawasan...
                            </option>
                          </select>
                        </div>
                        <div class="mb-3">
                          <label for="listrik" class="form-label fw-semibold"
                            >Daya Listrik</label
                          >
                          <select
                            class="form-select"
                            id="listrik"
                            name="listrik"
                            required
                          >
                            <option value="null" hidden>
                              Pilih daya listrik...
                            </option>
                          </select>
                        </div>
                        <div class="mb-3" style="display: none">
                          <label
                            for="skala-jenis"
                            class="form-label fw-semibold"
                            >Skala Jenis Kawasan</label
                          >
                          <select
                            class="form-select"
                            id="skala-jenis"
                            name="skala-jenis"
                          >
                            <option value="null" hidden>
                              Pilih skala jenis kawasan...
                            </option>
                          </select>
                        </div>
                        <div class="mb-3" id="konsidi-sampah">
                          <label class="form-label fw-semibold"
                            >Kondisi Sampah:</label
                          >
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="radio"
                              value="1"
                              name="konsidi-sampah"
                              id="konsidi-sampah-1"
                              checked
                            />
                            <label
                              class="form-check-label"
                              for="konsidi-sampah-1"
                            >
                              Terpilah
                            </label>
                          </div>
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="radio"
                              value="0"
                              name="konsidi-sampah"
                              id="konsidi-sampah-2"
                            />
                            <label
                              class="form-check-label"
                              for="konsidi-sampah-2"
                            >
                              Tercampur
                            </label>
                          </div>
                        </div>
                        <div class="mb-3" style="display">
                          <label
                            for="input-mudah-terurai"
                            class="form-label fw-semibold"
                            >Mudah Terurai/Organik (kg/bulan)</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            name="input-mudah-terurai"
                            id="input-mudah-terurai"
                            placeholder="contoh: 950.55"
                            autocomplete="off"
                          />
                        </div>
                        <div class="mb-3" style="display">
                          <label
                            for="input-daur-ulang"
                            class="form-label fw-semibold"
                            >Daur Ulang/Anorganik (kg/bulan)</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            name="input-daur-ulang"
                            id="input-daur-ulang"
                            placeholder="contoh: 950.55"
                            autocomplete="off"
                          />
                        </div>
                        <div class="mb-3" style="display">
                          <label for="sampah" class="form-label fw-semibold"
                            >Residu (kg/bulan)</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            name="sampah"
                            id="sampah"
                            placeholder="contoh: 950.55"
                            autocomplete="off"
                            required
                          />
                        </div>
                        <button type="reset" class="btn btn-light">
                          Reset
                        </button>
                        <button type="submit" class="btn btn-primary">
                          Hitung
                        </button>
                      </form>
                    </div>
                  </div>
                </div>
                <div
                  class="col-md-6 col-12 custom-fadeUp"
                  data-appear-animation="fadeInUpShorter"
                  data-appear-animation-delay="200"
                  id="hasil-simulasi"
                  style="display: none"
                >
                  <div class="card shadow col-12">
                    <div class="card-body">
                      <div class="text-center">
                        <h3 class="fw-semibold mb-3 text-capitalize mb-0">
                          <span id="preview-kawasan"></span>
                        </h3>
                        <p
                          class="fs-6 mb-2 mt-2"
                          id="preview-skala-jenis-kawasan"
                        ></p>

                        <div class="d-flex gap-2 justify-content-center mb-4">
                          <p class="badge badge-warning mb-0">
                            <i class="fa-solid fa-bolt"></i> Listrik:
                            <span id="preview-listrik" class="ms-1"></span>
                          </p>
                          <p class="badge badge-primary mb-0">
                            <i class="fa-solid fa-trash-can"></i> Sampah:
                            <span id="preview-sampah" class="ms-1"></span>
                            kg/bulan
                          </p>
                        </div>
                      </div>

                      <div style="font-size: 0.85rem">
                        <h4 class="text-primary mb-1"># Tarif Layanan</h4>
                        <div id="detail-tarif-layanan"></div>
                      </div>

                      <hr style="height: 3px" />

                      <div class="text-center">
                        <h4 class="fw-semibold mb-1">
                          Estimasi Tarif Layanan Anda
                        </h4>
                        <p style="font-size: 0.9rem">
                          Berikut hasil simulasi berdasarkan data yang sudah
                          anda input.
                        </p>
                      </div>

                      <div class="mb-3" style="font-size: 0.85rem">
                        <h4 class="mb-1 text-primary"># Berat Sampah</h4>
                        <div class="d-flex justify-content-between">
                          <p class="mb-0">Mudah Terurai</p>
                          <p class="mb-0 text-end" style="min-width: 35%">
                            <span id="sampah-mudah-terurai">0</span> Kg
                          </p>
                        </div>
                        <div class="d-flex justify-content-between">
                          <p class="mb-0">Daur Ulang</p>
                          <p class="mb-0 text-end" style="min-width: 35%">
                            <span id="sampah-daur-ulang">0</span> Kg
                          </p>
                        </div>
                        <div class="d-flex justify-content-between">
                          <p class="mb-0">Residu</p>
                          <p class="mb-0 text-end" style="min-width: 35%">
                            <span id="sampah-residu">0</span> Kg
                          </p>
                        </div>
                        <div class="d-flex justify-content-between fw-semibold">
                          <p class="mb-0 fs-6">Total Sampah</p>
                          <p class="mb-0 fs-6 text-end" style="min-width: 35%">
                            <span id="sampah-total">0</span> Kg
                          </p>
                        </div>
                      </div>

                      <div style="font-size: 0.85rem">
                        <h4 class="mb-1 text-primary"># Tarif Akhir</h4>
                        <div id="preview-tarif-akhir"></div>
                      </div>

                      <a id="cta" target="_blank" href="https://api.whatsapp.com/send/?phone=6282211001180&text=Saya%20ingin%20bekerja%20sama%20dengan%20BLUD" class="btn btn-primary mt-4 w-100 fs-6"
                        >Ajukan Kerja Sama</a
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./toastify.js"></script>
    <script src="./toastify-js.js"></script>
    <!-- <script src="/fetch.js"></script> -->

    <script>
      const toast = new Toast()

      $(document).ready(async function () {

          // Initiate Input
          const kawasanInput = $("#kawasan");
          const skalaInput = $("#skala-jenis")
          const listrikInput = $("#listrik");
          const sampahInput = $("#sampah");

          // Initiate Selected value from user
          let selectedKawasan, selectedSkalaJenis, selectedListrik, valueSampah

          // Initiate Data Information
          let user = {}

          // Get Data Tarif PKM
          const data = await fetch("./tarif_pkm.json").then(res => res.json());

          // Assign input jenis kawasan
          kawasanInput.html("<option value=null hidden>Pilih jenis kawasan...</option>")
          for (const item of data.jenis_kawasan) {
              const el = `<option class="text-capitalize" value=${item.id}>${item.title}</option>`
              kawasanInput.append(el)
          }

          // Handle Event Listener kawasan while on change
          kawasanInput.on("change", function () {
              selectedKawasan = data.jenis_kawasan.filter(data => data.id == $(this).val())[0]

              // Action when jenis kawasan selected "Perdagangan dan Jasa"
              if (selectedKawasan.id == 3) {
                  $("#skala-jenis").parent().show(300)
              } else {
                  skalaInput.html("<option value=null hidden>Pilih skala jenis kawasan...</option>")
                  $("#skala-jenis").parent().hide(300)
              }

              // Assign input jenis listrik
              listrikInput.html("<option value=null hidden>Pilih daya listrik...</option>")
              for (const item of selectedKawasan.listrik) {
                  const el = `<option value=${item.id}>${item.title}</option>`
                  listrikInput.append(el)
              }

              // Reset
              selectedListrik = null
          })

          // Handle Event Listener while on change
          listrikInput.on("change", function () {
              selectedListrik = selectedKawasan.listrik.filter(data => data.id == $(this).val())[0]

              // Action when jenis kawasan selected "Perdagangan dan Jasa"
              if (selectedKawasan.id == 3) {
                  selectPerdaganganJasa = selectedKawasan.listrik[0].skala_jenis_kawasan

                  skalaInput.html("<option value=null hidden>Pilih skala jenis kawasan...</option>")
                  for (const item of selectPerdaganganJasa) {
                      const el = `<option class="text-capitalize" value=${item.id}>${item.title}</option>`
                      skalaInput.append(el)
                  }
              } else {
                  selectedSkalaJenis = ''
              }
          })

          // Handle skala input on change
          skalaInput.on("change", function () {
              if (listrikInput.val() == "null") {
                  toast.show("Pilih daya listrik terlebih dahulu", "danger")
              } else {
                  const tempSelectedListrik = selectedKawasan.listrik.filter(data => data.id == listrikInput.val())
                  selectedSkalaJenis = tempSelectedListrik[0].skala_jenis_kawasan.filter(data => data.id == $(this).val())[0]
              }
          })

          // Handle checkbox on change
          $('input[name="konsidi-sampah"]').change(function () {
              var selectedValue = $(this).val();

              switch (selectedValue) {
                  case "1":
                      $("#input-mudah-terurai").parent().show(300)
                      $("#input-daur-ulang").parent().show(300)
                      break
                  case "0":
                      $("#input-mudah-terurai").val("")
                      $("#input-daur-ulang").val("")

                      $("#input-mudah-terurai").parent().val("").hide(300)
                      $("#input-daur-ulang").parent().val("").hide(300)
                      break
              }
          });

          $("#form-simulasi").on("submit", (e) => {
              e.preventDefault(); // Mencegah refresh halaman

              try {
                  const formData = new FormData($("#form-simulasi")[0]);

                  const valueBeratSampah = [...formData].filter(item => item[0] == "sampah")[0][1]
                  const valuemudahTerurai = [...formData].filter(item => item[0] == "input-mudah-terurai")[0][1]
                  const valueDaurUlang = [...formData].filter(item => item[0] == "input-daur-ulang")[0][1]

                  if (!selectedKawasan) {
                      throw new Error('Kawasan harus diisi ')
                  }

                  if (!selectedListrik) {
                      $("#preview-listrik").text("")
                      throw new Error('Daya listrik harus diisi ')
                  }

                  // Assign data from form into object user
                  user.jenis_kawasan = selectedKawasan.title
                  user.daya_listrik = selectedListrik.title ? selectedListrik.title : undefined
                  user.skala_jenis_kawasan = selectedSkalaJenis.title == undefined ? "" : `(${selectedSkalaJenis.title})`
                  user.sampah = parseFloat(valueBeratSampah)
                  user.mudah_terurai = valuemudahTerurai != "" ? parseFloat(valuemudahTerurai) : 0
                  user.daur_ulang = valueDaurUlang != "" ? parseFloat(valueDaurUlang) : 0

                  if (kawasanInput.val() == "3") {
                      if (parseInt($("#skala-jenis").val()) == 3) {
                          user.layanan = [
                              selectedSkalaJenis.layanan[0],
                              selectedSkalaJenis.layanan[1],
                              selectedSkalaJenis.layanan[2],
                              selectedSkalaJenis.layanan[3],
                          ];
                      } else {
                          user.layanan = [
                              selectedSkalaJenis.layanan[0],
                              selectedSkalaJenis.layanan[1],
                              selectedSkalaJenis.layanan[2],
                              selectedSkalaJenis.layanan[3],
                              selectedSkalaJenis.layanan[4],
                          ];
                      }
                  } else if (kawasanInput.val() == "4") {
                      user.layanan = [
                          selectedListrik.layanan[0],
                          selectedListrik.layanan[1],
                          selectedListrik.layanan[2],
                          selectedListrik.layanan[4]
                      ];
                  }
                  else {
                      user.layanan = [
                          selectedListrik.layanan[0],
                          selectedListrik.layanan[1],
                          selectedListrik.layanan[2],
                          selectedListrik.layanan[4]
                      ];
                  }



                  $("#hasil-simulasi").show(300)

                  if ($(window).width() > 768) {
                      $("html, body").animate({ scrollTop: 100 }, "slow")
                  } else {
                      $('html, body').animate({
                          scrollTop: $('#hasil-simulasi').offset().top - 125 // Menggunakan offset top dari elemen target
                      }, 'slow');
                  }

                  // Assign data into preview
                  $("#preview-kawasan").text(user.jenis_kawasan)
                  $("#preview-skala-jenis-kawasan").text(`${user.skala_jenis_kawasan}`)
                  $("#preview-listrik").text(user.daya_listrik)
                  $("#preview-sampah").text((user.sampah + user.mudah_terurai + user.daur_ulang).toLocaleString('id-ID'))

                  // render
                  renderTarifLayanan(user)
                  renderTarifAkhir(user)

                  // Event ketika input jumlah unit berubah
                  $("#input-unit").keyup(function () {
                      renderTarifAkhir(user)
                  })
                  $("#input-unit").change(function () {
                      renderTarifAkhir(user)
                  })

                  callToAction()

              } catch (error) {
                  console.error(error.message);
                  toast.show(error.message, "danger")
              }
          });

          function renderTarifLayanan(user) {
              $("#detail-tarif-layanan").html("") // Reset
              for (const [index, item] of user.layanan.entries()) {
                  const text = "unit"
                          const el = `
                          <div class="d-flex justify-content-between ${index == (user.layanan).length - 1 ? '' : 'border-bottom'}">
                              <div class="form-check mt-1">
                                  <input
                                  class="form-check-input"
                                  type="checkbox"
                                  value="${item.title}"
                                  name="layanan${item.id}"
                                  id="cbox${item.id}"
                                  ${item.title == "Pengumpulan Sampah" || item.title == "Pengolahan Sampah" || item.title == "Pemilahan Sampah" || item.title == "Pemilahan dan Pengumpulan Sampah" ? "": "checked" }
                                  />
                                  <label class="form-check-label" for="cbox${item.id}">${item.title} (${item.satuan}) ${item.satuan.toLowerCase().includes(text) ? '<input type="number" id="input-unit" class="d-inline-block p-1 form-control text-center" style="width: 50px" value="1"/>' : ''}</label>
                              </div>
                              <p id="preview-tarif-pemilahan" class="mb-1 text-end" style="min-width: 25%">Rp ${item.tarif.toLocaleString("id-ID")}</p>
                          </div>
                          `
                  $("#detail-tarif-layanan").append(el)
              }
          }

          function renderTarifAkhir(user) {
              // Initiate and assign berat sampah
              const mudah_terurai = parseFloat(user.mudah_terurai)
              const daur_ulang = parseFloat(user.daur_ulang)
              const residu = parseFloat(user.sampah)
              const total = mudah_terurai + daur_ulang + residu

              const options = { minimumFractionDigits: 2, maximumFractionDigits: 2 }

              // Render berat sampah into html
              $("#sampah-mudah-terurai").text((mudah_terurai).toLocaleString('id-ID', options))
              $("#sampah-daur-ulang").text((daur_ulang).toLocaleString('id-ID', options))
              $("#sampah-residu").text(residu.toLocaleString('id-ID', options))
              $("#sampah-total").text(total.toLocaleString('id-ID', options))

              kalkulasiTarif()

              let layananChecked = []
              const cbox = $("#detail-tarif-layanan input:checkbox")
              for (const item of cbox) {
                  $(item).on("click", (e) => {
                      kalkulasiTarif()
                  })
              }


              function kalkulasiTarif() {
                $("#preview-tarif-akhir").html("") // Reset

                  const cboxIsChecked = $("#detail-tarif-layanan input[type=checkbox]:checked")
                      const layananChecked = cboxIsChecked.map(function () {
                          return $(this).val()
                      }).get()
                      

                  let totalTarif = 0
                  let tooltip = ""

                  const options = { minimumFractionDigits: 0, maximumFractionDigits: 2 }

                  for (const [index, item] of user.layanan.entries()) {
                      let tarif = 0
                      let isChecked = layananChecked != null ? $.inArray(item.title, layananChecked) !== -1 : true;
                      let jumlahUnit = 0

                      switch (item.title.toLowerCase()) {
                          case "pemilahan sampah":
                          case "pengumpulan sampah":
                          case "pemilahan dan pengumpulan sampah":
                          // $("#input-unit").val() != "" || 
                              if(isChecked){
                                  jumlahUnit = $("#input-unit").val() !== undefined ? parseInt($("#input-unit").val()) : 1
                                }
                              tarif = jumlahUnit != undefined ? item.tarif * jumlahUnit : item.tarif
                              tooltip = `Tarif ${item.title} = Rp ${item.tarif.toLocaleString("id-ID", options)} x ${jumlahUnit} Unit = Rp ${tarif.toLocaleString("id-ID", options)}`
                              break
                          case "pengangkutan sampah":
                              tarif = item.tarif * total
                              tooltip = `Tarif ${item.title} x Total berat sampah = Rp ${item.tarif.toLocaleString("id-ID", options)} x ${total.toLocaleString("id-ID", options)} Kg = Rp ${tarif.toLocaleString("id-ID", options)}`
                              break
                          case "pengolahan sampah":
                              tarif = item.tarif * (mudah_terurai + daur_ulang)
                              tooltip = `Tarif ${item.title} x Sampah Terolah (Mudah Terurai + Daur Ulang) = Rp ${item.tarif.toLocaleString("id-ID", options)} x ${(mudah_terurai + daur_ulang).toLocaleString("id-ID", options)} Kg = Rp ${tarif.toLocaleString("id-ID", options)}`
                              break
                          case "pemrosesan akhir":
                              tarif = (item.tarif / 1000) * residu
                              tooltip = `Tarif ${item.title} x Sampah residu = Rp ${item.tarif.toLocaleString("id-ID", options)} x ${residu.toLocaleString("id-ID", options)} Kg = Rp ${tarif.toLocaleString("id-ID", options)}`
                              break
                      }

                      const el = `
                                                              <div class="d-flex justify-content-between ${isChecked ? "" : "text-decoration-line-through text-danger"}">
                                                                  <p class="mb-0 ${isChecked ? "" : "text-danger"}">${item.title} <span data-bs-toggle="tooltip" data-bs-animation="true" data-bs-placement="top" title="${tooltip}"><i class="fa-solid fa-circle-question"></i></span></p>
                                                                  <p class="mb-0 text-end ${isChecked ? "" : "text-danger"}" style="min-width: 35%;">Rp <span
                                                                          id="tarif-akhir-${item.id}"}">${tarif.toLocaleString("id-ID", options)}</span>
                                                                  </p>
                                                              </div>
                                                              `

                      if (layananChecked === null) {
                          totalTarif += tarif
                      } else {
                          isChecked ? totalTarif += tarif : null;
                      }
                      $("#preview-tarif-akhir").append(el)
                  }

                  $("#preview-tarif-akhir").append(`
                                              <div class="d-flex justify-content-between">
                                                  <p class="mb-0 fw-semibold fs-6">Total Tarif</p>
                                                  <p class="mb-0 fw-semibold fs-6 text-end" style="min-width: 35%;">Rp <span
                                                          id="tarif-akhir-total">${totalTarif.toLocaleString("id-ID", { minimumFractionDigits: 0, maximumFractionDigits: 2 })}</span>
                                                  </p>
                                              </div>
                                              `)
              }

          }

          function callToAction(){
            const nomor = 6282211001180
            const nama_perusahaan = $("#nama").val()
            const email = $("#email").val()
            const alamat = $("#alamat").val()
            const jenis_kawasan = $("#preview-kawasan").text()
            const skala_kawasan = $("#preview-skala-jenis-kawasan").text()
            const daya_listrik = $("#listrik").val()
            // const kondisi_sampah = $(":kondisi-sampah").val()
            const kondisi_sampah = ""
            const organik = $("#input-mudah-terurai").val() != "" ?  new Intl.NumberFormat("id-ID").format(parseInt($("#input-mudah-terurai").val())) : 0
            const anorganik = $("#input-mudah-terurai").val() != "" ? new Intl.NumberFormat("id-ID").format(parseInt($("#input-daur-ulang").val())) : 0
            const residu = new Intl.NumberFormat("id-ID").format(parseInt($("#sampah").val()))

            const link = `
            https://api.whatsapp.com/send?phone=${nomor}&text=*Saya%20ingin%20bekerja%20sama%20dengan%20BLUD*%0A%0ANama%20Perusahaan%3A%20${nama_perusahaan}%0AEmail%3A%20${email}%0AAlamat%3A%20${alamat}%0AJenis%20Kawasan%20%3D%20${jenis_kawasan}%2C%20${skala_kawasan}%2C%20%F0%9F%92%A1${daya_listrik}%0A%0A*Kondisi%20Sampah%20${kondisi_sampah}*%0AOrganik%3A%20${organik}%20kg%0AAnorganik%3A%20${anorganik}%20kg%0AResidu%3A%20${residu}%20kg
            `

            $("#cta").attr("href", link)
          }
      })
    </script>
  </body>
</html>
